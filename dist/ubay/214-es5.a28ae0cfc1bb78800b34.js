!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}(self.webpackChunkubay=self.webpackChunkubay||[]).push([[214],{1214:function(e,r,o){o.r(r),o.d(r,{uploadStatusModule:function(){return Z}});var i,u=o(8583),a=o(1841),c=o(4207),s=o(7384),p=o(665),l=o(3928),f=o(1558),m=o(8239),d=o(3018),h=o(9304),g=((i=function(){function e(n){t(this,e),this.http=n}return n(e,[{key:"postNewItem",value:function(t){return this.http.post(h.H+"product/",t)}},{key:"associateItemToUser",value:function(t,e){return this.http.post(h.H+"account/"+e+"/product/"+t,t)}}]),e}()).\u0275fac=function(t){return new(t||i)(d.LFG(a.eN))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac}),i),v=o(7053),y=o(8903),k=[{path:"",component:function(){var e=function(){function e(n,r,o,i,u,a){t(this,e),this.uploadService=n,this.authenticationService=r,this.fb=o,this.routerActivated=i,this.router=u,this.snackBar=a,this.productBasicInfo={name:"",description:"",price:0,quantity:0,category:"",rating:0}}return n(e,[{key:"ngOnInit",value:function(){this.initFilterForm()}},{key:"initFilterForm",value:function(){this.newProdForm=this.fb.group({name:["",p.kI.required],quantity:["",p.kI.required],price:["",p.kI.required],category:["",p.kI.required],description:["",p.kI.required]})}},{key:"uploadButton",value:function(){this.newProdForm.valid?(this.getFilterValues(),this.uploadProd(this.productBasicInfo)):this.showMsgError()}},{key:"getFilterValues",value:function(){var t=this;Object.keys(this.productBasicInfo).forEach(function(e){var n;t.productBasicInfo[e]=null===(n=t.newProdForm.get(e))||void 0===n?void 0:n.value})}},{key:"uploadProd",value:function(t){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r,o,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.authenticationService.currentUserValue.account.username,n.next=3,e.uploadService.postNewItem(t).toPromise();case 3:return o=(o=(o=n.sent).message.split("[")[1]).split("]")[0],n.next=7,e.uploadService.associateItemToUser(Number(o),r).toPromise();case 7:i=n.sent,e.snackBar.open(i.message,"Ok").afterDismissed().subscribe(function(t){e.redirectTo("/profile")});case 9:case"end":return n.stop()}},n)}))()}},{key:"showMsgError",value:function(){this.snackBar.open("Los campos no son correctos","Ok")}},{key:"closeSnackBar",value:function(){this.snackBar.dismiss()}},{key:"redirectTo",value:function(t,e){var n=this;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(function(){return n.router.navigate([t],{queryParams:{title:e}})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(g),d.Y36(v.$),d.Y36(p.qu),d.Y36(f.gz),d.Y36(f.F0),d.Y36(y.ux))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-upload"]],decls:22,vars:1,consts:[[1,"container"],[1,"form"],[3,"formGroup"],["pInputText","","formControlName","name"],["pInputNumber","","type","number","formControlName","quantity"],["pInputNumber","","type","number","formControlName","price"],["pInputText","","formControlName","category"],["pInputText","","formControlName","description"],["pButton","",3,"click"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"h2"),d._uU(2,"Poner a la venta un producto"),d.qZA(),d.TgZ(3,"div",1),d.TgZ(4,"form",2),d.TgZ(5,"label"),d._uU(6,"Nombre del producto"),d.qZA(),d._UZ(7,"input",3),d.TgZ(8,"label"),d._uU(9,"Cantidad que quieres vender"),d.qZA(),d._UZ(10,"input",4),d.TgZ(11,"label"),d._uU(12,"Precio"),d.qZA(),d._UZ(13,"input",5),d.TgZ(14,"label"),d._uU(15,"Categorias"),d.qZA(),d._UZ(16,"input",6),d.TgZ(17,"label"),d._uU(18,"Descripcion del producto"),d.qZA(),d._UZ(19,"input",7),d.qZA(),d.qZA(),d.TgZ(20,"button",8),d.NdJ("click",function(){return e.uploadButton()}),d._uU(21,"Poner a la venta"),d.qZA(),d.qZA()),2&t&&(d.xp6(4),d.Q6J("formGroup",e.newProdForm))},directives:[p._Y,p.JL,p.sg,p.Fj,l.o,p.JJ,p.u,p.wV,c.Hq],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap";*[_ngcontent-%COMP%]{font-family:"Montserrat",sans-serif}.container[_ngcontent-%COMP%]{padding:5em;text-align:center;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{text-align:left;width:100%;margin-bottom:3em}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{justify-content:center}']}),e}()}],b=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[f.Bz.forChild(k)],f.Bz]}),e}(),Z=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({providers:[v.$,g],imports:[[u.ez,a.JF,c.hJ,s.FI,l.j,p.UX,p.u5,y.ZX,c.hJ,f.Bz,b]]}),e}()}}])}();