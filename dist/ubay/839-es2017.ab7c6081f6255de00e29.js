"use strict";(self.webpackChunkubay=self.webpackChunkubay||[]).push([[839],{3839:function(e,t,r){r.r(t),r.d(t,{RegisterStatusModule:function(){return f}});var n=r(8583),o=r(1841),i=r(4207),s=r(7384),a=r(665),u=r(3928),c=r(1558),p=r(3018),l=r(8903),m=r(9304);let g=(()=>{class e{constructor(e){this.http=e}getAccounts(e,t){return this.http.post(m.H+"account/"+e,t)}}return e.\u0275fac=function(t){return new(t||e)(p.LFG(o.eN))},e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac}),e})();const d=[{path:"",component:(()=>{class e{constructor(e,t,r,n){this.fb=e,this.snackBar=t,this.registerService=r,this.router=n,this.disabledConfig=!0,this.newUser={password:"",name:"",surname:"",direction:"",cp:"",city:"",province:"",country:"",email:""}}ngOnInit(){this.initFilterForm()}initFilterForm(){this.newUserForm=this.fb.group({name:["",a.kI.required],surname:["",a.kI.required],direction:["",a.kI.required],cp:["",a.kI.required],city:["",a.kI.required],province:["",a.kI.required],country:["",a.kI.required],username:["",a.kI.required],email:["",a.kI.required],password:["",a.kI.minLength(8)],passwordRepeat:["",a.kI.minLength(8)]})}registerButton(){this.newUserForm.valid?this.addNewUser():this.showMsgError()}addNewUser(){var e;this.getFilterValues(),this.checkIfCorrectData()?this.registerService.getAccounts(null===(e=this.newUserForm.get("username"))||void 0===e?void 0:e.value,this.newUser).subscribe(e=>{this.snackBar.open("Cuenta creada con exito","Ok").afterDismissed().subscribe(e=>{this.goToLogin()})},e=>this.snackBar.open(e.error.message,"Ok")):this.snackBar.open("La contrase\xf1a no es correcta","Ok")}checkIfCorrectData(){var e,t;return(null===(e=this.newUserForm.get("password"))||void 0===e?void 0:e.value)===(null===(t=this.newUserForm.get("passwordRepeat"))||void 0===t?void 0:t.value)}getFilterValues(){Object.keys(this.newUser).forEach(e=>{var t,r;this.newUser[e]="email"===e?null===(t=this.newUserForm.get(e))||void 0===t?void 0:t.value.split("@"):null===(r=this.newUserForm.get(e))||void 0===r?void 0:r.value})}showMsgError(){this.snackBar.open("Los campos no son correctos","Ok")}redirectTo(e,t,r){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate([e],{queryParams:{password:t,username:r}}))}goToLogin(){this.redirectTo("/login")}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(a.qu),p.Y36(l.ux),p.Y36(g),p.Y36(c.F0))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-register"]],decls:40,vars:1,consts:[[1,"container"],[1,"form"],[3,"formGroup"],["pInputText","","formControlName","name"],["pInputText","","formControlName","surname"],["pInputText","","formControlName","direction"],["pInputText","","formControlName","cp"],["pInputText","","formControlName","city"],["pInputText","","formControlName","province"],["pInputText","","formControlName","country"],["pInputText","","formControlName","username"],["pInputText","","formControlName","email","type","email"],["pInputText","","formControlName","password","type","password"],["pInputText","","formControlName","passwordRepeat","type","password"],["pButton","",3,"click"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"h2"),p._uU(2,"Reg\xedstrate"),p.qZA(),p.TgZ(3,"div",1),p.TgZ(4,"form",2),p.TgZ(5,"label"),p._uU(6,"Nombre"),p.qZA(),p._UZ(7,"input",3),p.TgZ(8,"label"),p._uU(9,"Apellidos"),p.qZA(),p._UZ(10,"input",4),p.TgZ(11,"label"),p._uU(12,"Direccion"),p.qZA(),p._UZ(13,"input",5),p.TgZ(14,"label"),p._uU(15,"C\xf3digo Postal"),p.qZA(),p._UZ(16,"input",6),p.TgZ(17,"label"),p._uU(18,"Poblaci\xf3n"),p.qZA(),p._UZ(19,"input",7),p.TgZ(20,"label"),p._uU(21,"Municipio"),p.qZA(),p._UZ(22,"input",8),p.TgZ(23,"label"),p._uU(24,"Pa\xeds"),p.qZA(),p._UZ(25,"input",9),p.TgZ(26,"label"),p._uU(27,"Username"),p.qZA(),p._UZ(28,"input",10),p.TgZ(29,"label"),p._uU(30,"Correo electr\xf3nico"),p.qZA(),p._UZ(31,"input",11),p.TgZ(32,"label"),p._uU(33,"Contrase\xf1a"),p.qZA(),p._UZ(34,"input",12),p.TgZ(35,"label"),p._uU(36,"Repite la contrase\xf1a"),p.qZA(),p._UZ(37,"input",13),p.qZA(),p.qZA(),p.TgZ(38,"button",14),p.NdJ("click",function(){return t.registerButton()}),p._uU(39,"Registrate"),p.qZA(),p.qZA()),2&e&&(p.xp6(4),p.Q6J("formGroup",t.newUserForm))},directives:[a._Y,a.JL,a.sg,a.Fj,u.o,a.JJ,a.u,i.Hq],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap";*[_ngcontent-%COMP%]{font-family:"Montserrat",sans-serif}.container[_ngcontent-%COMP%]{padding:5em;text-align:center;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{text-align:left;width:100%;margin-bottom:3em}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{justify-content:center}']}),e})()}];let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[c.Bz.forChild(d)],c.Bz]}),e})(),f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({providers:[g],imports:[[n.ez,o.JF,h,i.hJ,s.FI,u.j,a.UX,a.u5,l.ZX,i.hJ]]}),e})()}}]);