"use strict";(self.webpackChunkubay=self.webpackChunkubay||[]).push([[214],{1214:function(t,e,r){r.r(e),r.d(e,{uploadStatusModule:function(){return v}});var o=r(8583),n=r(1841),i=r(4207),s=r(7384),a=r(665),c=r(3928),u=r(1558),p=r(8239),l=r(3018),d=r(9304);let m=(()=>{class t{constructor(t){this.http=t}postNewItem(t){return this.http.post(d.H+"product/",t)}associateItemToUser(t,e){return this.http.post(d.H+"account/"+e+"/product/"+t,t)}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(n.eN))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})();var h=r(7053),f=r(8903);const g=[{path:"",component:(()=>{class t{constructor(t,e,r,o,n,i){this.uploadService=t,this.authenticationService=e,this.fb=r,this.routerActivated=o,this.router=n,this.snackBar=i,this.productBasicInfo={name:"",description:"",price:0,quantity:0,category:"",rating:0}}ngOnInit(){this.initFilterForm()}initFilterForm(){this.newProdForm=this.fb.group({name:["",a.kI.required],quantity:["",a.kI.required],price:["",a.kI.required],category:["",a.kI.required],description:["",a.kI.required]})}uploadButton(){this.newProdForm.valid?(this.getFilterValues(),this.uploadProd(this.productBasicInfo)):this.showMsgError()}getFilterValues(){Object.keys(this.productBasicInfo).forEach(t=>{var e;this.productBasicInfo[t]=null===(e=this.newProdForm.get(t))||void 0===e?void 0:e.value})}uploadProd(t){var e=this;return(0,p.Z)(function*(){const r=e.authenticationService.currentUserValue.account.username;let o=yield e.uploadService.postNewItem(t).toPromise();o=o.message.split("[")[1],o=o.split("]")[0];const n=yield e.uploadService.associateItemToUser(Number(o),r).toPromise();e.snackBar.open(n.message,"Ok").afterDismissed().subscribe(t=>{e.redirectTo("/profile")})})()}showMsgError(){this.snackBar.open("Los campos no son correctos","Ok")}closeSnackBar(){this.snackBar.dismiss()}redirectTo(t,e){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate([t],{queryParams:{title:e}}))}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(m),l.Y36(h.$),l.Y36(a.qu),l.Y36(u.gz),l.Y36(u.F0),l.Y36(f.ux))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-upload"]],decls:22,vars:1,consts:[[1,"container"],[1,"form"],[3,"formGroup"],["pInputText","","formControlName","name"],["pInputNumber","","type","number","formControlName","quantity"],["pInputNumber","","type","number","formControlName","price"],["pInputText","","formControlName","category"],["pInputText","","formControlName","description"],["pButton","",3,"click"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"h2"),l._uU(2,"Poner a la venta un producto"),l.qZA(),l.TgZ(3,"div",1),l.TgZ(4,"form",2),l.TgZ(5,"label"),l._uU(6,"Nombre del producto"),l.qZA(),l._UZ(7,"input",3),l.TgZ(8,"label"),l._uU(9,"Cantidad que quieres vender"),l.qZA(),l._UZ(10,"input",4),l.TgZ(11,"label"),l._uU(12,"Precio"),l.qZA(),l._UZ(13,"input",5),l.TgZ(14,"label"),l._uU(15,"Categorias"),l.qZA(),l._UZ(16,"input",6),l.TgZ(17,"label"),l._uU(18,"Descripcion del producto"),l.qZA(),l._UZ(19,"input",7),l.qZA(),l.qZA(),l.TgZ(20,"button",8),l.NdJ("click",function(){return e.uploadButton()}),l._uU(21,"Poner a la venta"),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.Q6J("formGroup",e.newProdForm))},directives:[a._Y,a.JL,a.sg,a.Fj,c.o,a.JJ,a.u,a.wV,i.Hq],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap";*[_ngcontent-%COMP%]{font-family:"Montserrat",sans-serif}.container[_ngcontent-%COMP%]{padding:5em;text-align:center;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{text-align:left;width:100%;margin-bottom:3em}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{justify-content:center}']}),t})()}];let Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[u.Bz.forChild(g)],u.Bz]}),t})(),v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({providers:[h.$,m],imports:[[o.ez,n.JF,i.hJ,s.FI,c.j,a.UX,a.u5,f.ZX,i.hJ,u.Bz,Z]]}),t})()}}]);